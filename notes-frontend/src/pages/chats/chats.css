:root{
  --bg:#F8FAFC;
  --panel:#FFFFFF;
  --ink:#0F1728;
  --muted:#6B7280;
  --hair:#E5E7EB;
  --brand:#1E40AF;

  /* alinhar com o header/home */
  --container-max: 1300px;   /* MESMA largura máxima que o header usa */
  --container-pad: 24px;     /* MESMO padding lateral */
  --header-h: 72px;          /* altura do HeaderLogado */
}

/* trava scroll global e garante 100% de altura */
html, body, #root { height: 100%; }
.page-chats { height: 100vh; overflow: hidden; }    
/* a página ocupa a tela toda (menos o header) */
.page-chats { min-height: 100%; }
.chats-wrap {
  height: calc(100vh - var(--header-h));
  display: flex;
  flex: 1;  
}

/* o grid ocupa 100% da altura disponível */
.chats-shell {
  height: 100%;
  overflow: hidden;          /* impede scroll externo */
  width: 100%;
}

/* impede a sidebar inteira de rolar, só as listas internas */
.chats-aside {
  height: 100%;
  overflow: hidden;
}

/* estas sim podem rolar */
.search-results { max-height: 220px; overflow: auto; }
.conversations  { flex: 1;   overflow: auto; }

/* no painel do chat, apenas o stream de mensagens rola */
.chat-panel  { overflow: hidden; }
.chat-scroll { flex: 1; height: 100%; overflow: auto; }

/* Página empilhada (header em cima, conteúdo embaixo) */
.page-chats{
  display:flex;
  flex-direction:column;
  background: var(--bg);
}

/* Wrapper centralizado com mesma largura do header/home */
.chats-wrap{
  max-width: var(--container-max);
  width: 100%;
  margin: 0 auto;
  padding: 0 var(--container-pad);
}

/* Grid de dois painéis limitado ao container */
.chats-shell{
  display:grid;
  grid-template-columns: 420px 1fr; /* leve ajuste na sidebar */
  gap: 0;
  height: calc(100vh - var(--header-h));
  background: var(--bg);
  border-radius: 16px;            /* opcional: fica mais “card” como a home */
  overflow: hidden;
  border: 1px solid var(--hair);  /* opcional: mesma vibe da home */
}

/* ===== Sidebar ===== */
.chats-aside{
  background:#FFF;
  display:flex;
  flex-direction:column;
  min-width:380px;
  border-right:1px solid var(--hair);
}
.aside-header{
  padding:16px;
  border-bottom:1px solid var(--hair);
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.aside-header h2{ font-size:18px; margin:0; }

.search-box{ padding:12px; border-bottom:1px solid var(--hair); }
.search-box input{
  width:100%; padding:10px 12px;
  border:1px solid var(--hair); border-radius:10px; outline:none;
}
.search-box input:focus{ border-color:#93C5FD; box-shadow:0 0 0 3px rgba(59,130,246,.12); }

.search-results{ max-height:220px; overflow:auto; border-bottom:1px solid var(--hair); }
.result-item{
  width:100%; display:flex; gap:10px; padding:10px 12px;
  border:none; background:#FFF; cursor:pointer; text-align:left;
}
.result-item:hover{ background:#F9FAFB; }
.result-item .avatar{
  width:36px; height:36px; border-radius:12px; background:#E5E7EB;
  display:grid; place-items:center; font-weight:700;
}
.title-row{ display:flex; align-items:center; gap:8px; justify-content:space-between; }
.role{ background:#EEF2FF; color:#3730A3; font-size:11px; padding:2px 6px; border-radius:999px; }
.muted{ color:var(--muted); }
.pad{ padding:12px; }

.conversations{ overflow:auto; }
.conv-item{
  width:100%; display:flex; gap:12px; padding:12px;
  border:none; background:#FFF; cursor:pointer; text-align:left;
  border-bottom:1px solid var(--hair);
}
.conv-item .avatar{
  width:40px; height:40px; border-radius:14px; background:#E5E7EB;
  display:grid; place-items:center; font-weight:700;
}
.conv-item.active{ background:#F1F5F9; }
.conv-main time{ color:var(--muted); font-size:12px; }
.ellipsis{ overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

/* ===== Painel do chat ===== */
.chat-panel{ display:flex; flex-direction:column; height:100%; background:#FFF; }
.chat-header{
  background:#FFF; border-bottom:1px solid var(--hair);
  padding:12px 16px; display:flex; align-items:center; justify-content:space-between;
}
.peer{ display:flex; gap:12px; align-items:center; }
.avatar.lg{
  width:44px; height:44px; border-radius:14px; background:#E5E7EB;
  display:grid; place-items:center; font-weight:800;
}
.status{ font-size:12px; }

.chat-scroll{
  flex:1; overflow:auto; padding:18px; display:flex; flex-direction:column; gap:10px;
  background: radial-gradient(1200px 1200px at 100% 0%, #F9FAFB 0%, #F3F4F6 100%);
}
.bubble-row{ display:flex; gap:8px; align-items:flex-end; }
.bubble-row.me{ justify-content:flex-end; }
.bubble{
  max-width:66%; padding:10px 12px; border-radius:14px;
  background:#FFFFFF; border:1px solid var(--hair); box-shadow:0 1px 0 rgba(0,0,0,.02);
}
.bubble-row.me .bubble{ background:#1E40AF; color:#FFF; border-color:#1E3A8A; }
.bubble p{ margin:0 0 4px 0; }
.bubble time{ font-size:11px; opacity:.7; }

.composer{
  display:flex; gap:10px; padding:12px; border-top:1px solid var(--hair); background:#FFF;
}
.composer input{
  flex:1; padding:12px; border:1px solid var(--hair); border-radius:12px; outline:none;
}
.composer input:focus{ border-color:#93C5FD; box-shadow:0 0 0 3px rgba(59,130,246,.12); }
.send-btn{
  background:var(--brand); color:#FFF; border:none; padding:0 18px; border-radius:12px; font-weight:600; cursor:pointer;
}
.send-btn:hover{ filter:brightness(.95); }

.empty-state{ height:100%; display:grid; place-items:center; text-align:center; }

/* Responsivo: quando a tela for menor que o container, segue fluido */
@media (max-width: 980px){
  .chats-shell{ grid-template-columns: 1fr; border-radius: 0; border: none; }
}

/* Avatar com imagem */
.avatar-img {
  width: 40px; height: 40px; border-radius: 50%;
  object-fit: cover; background: #fff; border: 1px solid #E4E7EC;
}
.avatar-img.sm, .avatar.sm { width: 36px; height: 36px; }
.avatar-img.lg, .avatar.lg { width: 44px; height: 44px; }

/* Fallback com inicial */
.avatar {
  width: 40px; height: 40px; border-radius: 50%;
  display: grid; place-items: center;
  font-weight: 700; color: #0F1728;
  background: #F2F4F7; border: 1px solid #E4E7EC;
}
.avatar.sm { width: 36px; height: 36px; font-size: 14px; }
.avatar.lg { width: 44px; height: 44px; font-size: 16px; }

/* Truncar subtítulos */
.ellipsis { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 420px; }
/* ===== Resultados da busca: não deixar o NOME sumir ===== */
/* ===== FIX: nome sumindo na lista de resultados da busca ===== */

/* Item: avatar fixo + coluna de textos que pode encolher */
.chats-aside .search-results .result-item{
  display:flex !important;
  align-items:center !important;
  gap:10px !important;
}

.chats-aside .search-results .result-item .avatar,
.chats-aside .search-results .result-item .avatar-img{
  width:36px !important;
  height:36px !important;
  flex:0 0 36px !important;      /* não encolhe */
}

/* A coluna de textos PRECISA ter min-width:0 para o ellipsis funcionar */
.chats-aside .search-results .result-item > div{
  flex:1 1 auto !important;
  min-width:0 !important;
}

/* Linha do título: nome manda no espaço; badge não empurra */
.chats-aside .search-results .result-item .title-row{
  display:flex !important;
  align-items:center !important;
  gap:8px !important;
  justify-content:flex-start !important;
}

/* Nome: não pode encolher a 0; trunca com reticências */
.chats-aside .search-results .result-item .title-row > strong{
  display:block !important;
  flex:1 1 auto !important;
  min-width:0 !important;              /* ESSENCIAL */
  max-width:100% !important;
  overflow:hidden !important;
  text-overflow:ellipsis !important;
  white-space:nowrap !important;
  color:var(--ink) !important;
  font-weight:700 !important;
  font-size:15px !important;
  line-height:1.2 !important;
  visibility:visible !important;
  opacity:1 !important;
}

/* Badge fixo à direita */
.chats-aside .search-results .result-item .title-row .role{
  flex:0 0 auto !important;
}

/* Bio uma linha */
.chats-aside .search-results .result-item .muted{
  display:block !important;
  margin-top:2px !important;
  overflow:hidden !important;
  text-overflow:ellipsis !important;
  white-space:nowrap !important;
}
/* nome clicável na lista de chats */
.page-chats .user-name-link{
  cursor: pointer;
  text-decoration: none;   /* tira a linha */
  color: inherit;          /* cor normal do texto */
  font-weight: 700;        /* mantém o destaque do nome */
}

/* só no hover fica azul pra indicar que é link */
.page-chats .user-name-link:hover{
  color: #1E40AF;
}

/* acessível no teclado */
.page-chats .user-name-link:focus-visible{
  outline: 2px solid rgba(30, 64, 175, .35);
  outline-offset: 2px;
  border-radius: 4px;
}
